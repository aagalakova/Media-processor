<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MediaProcessor | Relation-AI</title>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>

  <!--
    FFmpeg WASM (v0.11.x):
    1) —Å–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–±—É–µ–º –ª–æ–∫–∞–ª—å–Ω–æ (—Å–∞–º–æ—Ö–æ—Å—Ç–∏–Ω–≥): /ffmpeg/ffmpeg.min.js –∏ /ffmpeg/ffmpeg-core.js (+ wasm/worker —Ä—è–¥–æ–º)
    2) –µ—Å–ª–∏ –ª–æ–∫–∞–ª—å–Ω–æ –Ω–µ—Ç ‚Äî –ø—Ä–æ–±—É–µ–º CDN:
       - @ffmpeg/ffmpeg@0.11.6
       - @ffmpeg/core@0.11.0 (worker –±—É–¥–µ—Ç: https://cdn.jsdelivr.net/npm/@ffmpeg/core@0.11.0/dist/ffmpeg-core.worker.js)
    –ï—Å–ª–∏ SharedArrayBuffer –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω (COOP/COEP –Ω–µ –≤–∫–ª—é—á–µ–Ω—ã) ‚Äî fallback –Ω–∞ core-st.
  -->

  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
    body { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 40px 20px; }
    .container { max-width: 1000px; margin: 0 auto; background: white; border-radius: 20px; box-shadow: 0 20px 40px rgba(0,0,0,0.1); overflow: hidden; }
    .header { background: linear-gradient(135deg, #2c3e50, #34495e); color: white; padding: 30px; text-align: center; }
    .header h1 { font-size: 2.5em; margin-bottom: 10px; }
    .header p { opacity: 0.9; font-size: 1.1em; }

    /* –°—Ç–∞—Ç—É—Å FFmpeg */
    .ffmpeg-status { margin-top: 12px; display: inline-block; padding: 8px 12px; border-radius: 999px; font-size: 0.9em; background: rgba(255,255,255,0.12); border: 1px solid rgba(255,255,255,0.25); }
    .ffmpeg-status.ok { background: rgba(46, 204, 113, 0.22); border-color: rgba(46, 204, 113, 0.35); }
    .ffmpeg-status.warn { background: rgba(241, 196, 15, 0.22); border-color: rgba(241, 196, 15, 0.35); }
    .ffmpeg-status.err { background: rgba(231, 76, 60, 0.22); border-color: rgba(231, 76, 60, 0.35); }

    .upload-zone { border: 3px dashed #3498db; border-radius: 15px; padding: 60px 40px; text-align: center; margin: 30px; background: #f8f9fa; transition: all 0.3s ease; cursor: pointer; }
    .upload-zone:hover { border-color: #2980b9; background: #e3f2fd; }
    .upload-zone.dragover { border-color: #27ae60; background: #d4edda; }
    .upload-icon { font-size: 4em; margin-bottom: 20px; color: #3498db; }
    .file-input { display: none; }

    .upload-btn { background: #3498db; color: white; padding: 12px 30px; border: none; border-radius: 25px; cursor: pointer; font-size: 1.1em; transition: background 0.3s ease; margin: 5px; }
    .upload-btn:hover { background: #2980b9; }

    .file-list { margin: 20px 30px; max-height: 400px; overflow-y: auto; }
    .file-list-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
    .file-list-header h3 { color: #2c3e50; }
    .clear-all-btn { background: #e74c3c; color: white; border: none; padding: 8px 16px; border-radius: 8px; cursor: pointer; font-size: 0.9em; transition: background 0.3s ease; }
    .clear-all-btn:hover { background: #c0392b; }

    .file-item { display: flex; justify-content: space-between; align-items: center; padding: 15px; background: #f8f9fa; border-radius: 10px; margin-bottom: 10px; border-left: 4px solid #3498db; }
    .file-info { display: flex; align-items: center; gap: 10px; flex: 1; }
    .file-icon { font-size: 1.5em; }
    .file-size { color: #7f8c8d; font-size: 0.9em; }
    .file-rename { display: flex; align-items: center; gap: 10px; margin-left: 15px; }
    .rename-input { padding: 8px 12px; border: 2px solid #bdc3c7; border-radius: 8px; font-size: 0.9em; width: 200px; transition: border-color 0.3s ease; }
    .rename-input:focus { border-color: #3498db; outline: none; }

    .settings { background: #f8f9fa; padding: 30px; margin: 20px 30px; border-radius: 15px; }
    .settings-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; padding-bottom: 15px; border-bottom: 2px solid #e3f2fd; }
    .settings-header h2 { color: #2c3e50; display: flex; align-items: center; gap: 10px; }
    .settings-controls { display: flex; gap: 10px; }
    .settings-btn { background: #95a5a6; color: white; border: none; padding: 8px 16px; border-radius: 8px; cursor: pointer; font-size: 0.9em; transition: background 0.3s ease; }
    .settings-btn:hover { background: #7f8c8d; }
    .settings-btn.reset { background: #e67e22; }
    .settings-btn.reset:hover { background: #d35400; }
    .settings-btn.clear { background: #e74c3c; }
    .settings-btn.clear:hover { background: #c0392b; }

    .settings-section { margin-bottom: 25px; background: white; padding: 20px; border-radius: 10px; border: 2px solid #e3f2fd; }
    .settings-section h3 { color: #2c3e50; margin-bottom: 15px; display: flex; align-items: center; gap: 10px; }
    .size-input { width: 100%; padding: 12px; border: 2px solid #bdc3c7; border-radius: 8px; font-size: 1em; margin-bottom: 15px; }

    .naming-section { background: white; padding: 20px; border-radius: 10px; border: 2px solid #e3f2fd; margin: 20px 0; }
    .naming-example { color: #7f8c8d; font-size: 0.9em; margin-top: 5px; }
    .naming-options { background: #f8f9fa; padding: 15px; border-radius: 8px; margin: 10px 0; }
    .naming-option { display: flex; align-items: center; gap: 8px; margin: 8px 0; }

    .format-options { display: flex; gap: 20px; flex-wrap: wrap; margin-top: 15px; }
    .format-option { display: flex; align-items: center; gap: 8px; }
    .format-option input[type="checkbox"] { width: 18px; height: 18px; }

    .video-quality-options { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px; margin-top: 10px; }
    .video-quality-option { display: flex; align-items: center; gap: 8px; padding: 12px; border: 2px solid #bdc3c7; border-radius: 8px; cursor: pointer; transition: all 0.3s ease; }
    .video-quality-option:hover { border-color: #3498db; background: #e3f2fd; }
    .video-quality-option.selected { border-color: #27ae60; background: #d4edda; }
    .quality-info { font-size: 0.8em; color: #666; margin-left: auto; }

    .preset-buttons { display: flex; gap: 10px; margin-top: 10px; flex-wrap: wrap; }
    .preset-btn { background: #95a5a6; color: white; border: none; padding: 8px 16px; border-radius: 15px; cursor: pointer; font-size: 0.9em; transition: background 0.3s ease; }
    .preset-btn:hover { background: #7f8c8d; }

    .ai-section { background: linear-gradient(135deg, #667eea, #764ba2); color: white; padding: 20px; border-radius: 10px; margin: 20px 0; position: relative; }
    .ai-feature { display: flex; align-items: center; gap: 10px; margin: 10px 0; }

    .ai-advisor-section { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 10px; margin: 20px 0; }
    .ai-advisor-card { background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(10px); border-radius: 10px; padding: 20px; border: 1px solid rgba(255, 255, 255, 0.2); }
    .ai-tip { background: rgba(255, 255, 255, 0.15); border-radius: 8px; padding: 15px; margin-bottom: 15px; border-left: 4px solid #27ae60; }
    .ai-tip-header { display: flex; align-items: center; gap: 10px; margin-bottom: 8px; }
    .ai-tip-content { font-size: 0.95em; opacity: 0.9; }
    .ai-actions { display: flex; gap: 10px; flex-wrap: wrap; }
    .ai-btn { background: rgba(255, 255, 255, 0.2); color: white; border: 1px solid rgba(255, 255, 255, 0.3); padding: 10px 16px; border-radius: 8px; cursor: pointer; font-size: 0.9em; transition: all 0.3s ease; flex: 1; min-width: 120px; }
    .ai-btn:hover { background: rgba(255, 255, 255, 0.3); transform: translateY(-1px); }
    .ai-btn.secondary { background: rgba(39, 174, 96, 0.3); border-color: rgba(39, 174, 96, 0.5); }

    .ai-results { margin-top: 20px; animation: fadeIn 0.5s ease; }
    .ai-stats { background: rgba(255, 255, 255, 0.1); border-radius: 8px; padding: 15px; margin-bottom: 15px; font-size: 0.9em; }
    .ai-tips-list { display: flex; flex-direction: column; gap: 10px; }
    .ai-tip-item { background: rgba(255, 255, 255, 0.1); border-radius: 8px; padding: 12px 15px; border-left: 3px solid #3498db; animation: slideIn 0.3s ease; }
    .ai-tip-item:nth-child(2n) { border-left-color: #9b59b6; }
    .ai-tip-item:nth-child(3n) { border-left-color: #e74c3c; }

    .color-palette { display: flex; gap: 5px; margin: 10px 0; }
    .color-swatch { width: 30px; height: 30px; border-radius: 6px; border: 2px solid rgba(255, 255, 255, 0.3); position: relative; cursor: pointer; transition: transform 0.2s ease; }
    .color-swatch:hover { transform: scale(1.1); }
    .color-swatch::after { content: attr(data-hex); position: absolute; bottom: -25px; left: 50%; transform: translateX(-50%); background: rgba(0, 0, 0, 0.8); color: white; padding: 2px 6px; border-radius: 4px; font-size: 0.7em; white-space: nowrap; opacity: 0; transition: opacity 0.3s ease; }
    .color-swatch:hover::after { opacity: 1; }

    .brand-analysis-results { background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(10px); border-radius: 10px; padding: 15px; margin-top: 15px; border: 1px solid rgba(255, 255, 255, 0.2); animation: fadeIn 0.5s ease; }
    .brand-analysis-results .color-swatch { width: 25px; height: 25px; border-radius: 4px; border: 2px solid rgba(255, 255, 255, 0.5); }
    .brand-analysis-results .color-swatch::after { bottom: -30px; z-index: 10; }

    .process-btn { background: linear-gradient(135deg, #27ae60, #2ecc71); color: white; border: none; padding: 15px 40px; font-size: 1.2em; border-radius: 25px; cursor: pointer; display: block; margin: 30px auto; transition: transform 0.2s ease; }
    .process-btn:hover { transform: translateY(-2px); box-shadow: 0 10px 20px rgba(39, 174, 96, 0.3); }
    .process-btn:active { transform: translateY(0); }
    .process-btn:disabled { background: #bdc3c7; cursor: not-allowed; transform: none; }

    .result { margin: 20px 30px; padding: 25px; background: #e8f5e8; border-radius: 15px; border-left: 4px solid #27ae60; }
    .result-files { margin-top: 15px; }
    .result-file { display: flex; justify-content: space-between; align-items: center; padding: 12px; background: white; border-radius: 8px; margin-bottom: 8px; border-left: 3px solid #27ae60; }
    .file-size-compression { font-size: 0.8em; color: #27ae60; margin-left: 10px; }
    .download-btn { background: #3498db; color: white; border: none; padding: 6px 12px; border-radius: 5px; cursor: pointer; font-size: 0.8em; }
    .download-btn:hover { background: #2980b9; }
    .hidden { display: none; }

    .progress-bar { width: 100%; height: 6px; background: #ecf0f1; border-radius: 3px; margin: 20px 0; overflow: hidden; }
    .progress { height: 100%; background: linear-gradient(135deg, #3498db, #2980b9); width: 0%; transition: width 0.3s ease; }

    .download-section { text-align: center; padding: 20px; background: #f0f8ff; margin: 20px 30px; border-radius: 15px; border: 2px dashed #9b59b6; }
    .download-all-btn { background: linear-gradient(135deg, #9b59b6, #8e44ad); color: white; border: none; padding: 15px 40px; font-size: 1.2em; border-radius: 25px; cursor: pointer; transition: transform 0.2s ease; }
    .download-all-btn:hover { transform: translateY(-2px); box-shadow: 0 10px 20px rgba(155, 89, 182, 0.3); }

    .stats { text-align: center; margin: 10px 0; color: #7f8c8d; font-size: 0.9em; }

    .resolution-options { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 10px; margin-top: 10px; }
    .resolution-option { display: flex; align-items: center; gap: 8px; padding: 10px; border: 2px solid #bdc3c7; border-radius: 8px; cursor: pointer; transition: all 0.3s ease; }
    .resolution-option:hover { border-color: #3498db; background: #e3f2fd; }
    .resolution-option.selected { border-color: #27ae60; background: #d4edda; }

    .checkbox-controls { display: flex; gap: 10px; margin: 10px 0; flex-wrap: wrap; }
    .checkbox-btn { background: #3498db; color: white; border: none; padding: 6px 12px; border-radius: 5px; cursor: pointer; font-size: 0.8em; transition: background 0.3s ease; }
    .checkbox-btn:hover { background: #2980b9; }
    .checkbox-btn.select-all { background: #27ae60; }
    .checkbox-btn.select-all:hover { background: #219a52; }
    .checkbox-btn.clear-all { background: #e74c3c; }
    .checkbox-btn.clear-all:hover { background: #c0392b; }

    .empty-state { text-align: center; padding: 40px; color: #7f8c8d; }
    .empty-state .upload-icon { font-size: 3em; margin-bottom: 10px; }

    .cancel-btn { background: #e74c3c; color: white; border: none; padding: 8px 12px; border-radius: 5px; cursor: pointer; margin-left: 10px; }
    .cancel-btn:hover { background: #c0392b; }

    .temp-message { border-radius: 8px; padding: 15px; margin: 15px 30px; }
    .error-message { background: #f8d7da; border: 2px solid #e74c3c; color: #721c24; }

    .background-color-section { background: white; padding: 20px; border-radius: 10px; border: 2px solid #e3f2fd; margin: 20px 0; }
    .background-color-options { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 12px; margin-top: 15px; }
    .background-color-option { display: flex; align-items: center; gap: 12px; padding: 15px; border: 2px solid #bdc3c7; border-radius: 10px; cursor: pointer; transition: all 0.3s ease; }
    .background-color-option:hover { border-color: #3498db; background: #f0f8ff; transform: translateY(-2px); }
    .background-color-option.selected { border-color: #27ae60; background: #e8f5e8; box-shadow: 0 4px 12px rgba(39, 174, 96, 0.2); }
    .background-color-preview { width: 40px; height: 40px; border-radius: 8px; border: 2px solid #ddd; display: flex; align-items: center; justify-content: center; font-size: 1.2em; }
    .background-color-info { display: flex; flex-direction: column; gap: 3px; }
    .background-color-name { font-weight: 600; color: #2c3e50; }
    .background-color-description { font-size: 0.85em; color: #7f8c8d; }

    .custom-color-picker { display: flex; align-items: center; gap: 10px; margin-top: 10px; padding: 10px; background: #f8f9fa; border-radius: 8px; border: 1px dashed #bdc3c7; }
    .color-input { width: 60px; height: 40px; border: 2px solid #bdc3c7; border-radius: 6px; cursor: pointer; padding: 2px; }
    .color-input::-webkit-color-swatch-wrapper { padding: 0; }
    .color-input::-webkit-color-swatch { border: none; border-radius: 4px; }
    .color-hex-input { flex: 1; padding: 8px 12px; border: 2px solid #bdc3c7; border-radius: 6px; font-size: 0.9em; font-family: monospace; }

    .transparent-grid {
      background-image:
        linear-gradient(45deg, #ccc 25%, transparent 25%),
        linear-gradient(-45deg, #ccc 25%, transparent 25%),
        linear-gradient(45deg, transparent 75%, #ccc 75%),
        linear-gradient(-45deg, transparent 75%, #ccc 75%);
      background-size: 20px 20px;
      background-position: 0 0, 0 10px, 10px -10px, -10px 0px;
    }

    .video-processing-info { background: #e3f2fd; border-radius: 8px; padding: 15px; margin: 15px 0; border-left: 4px solid #3498db; }
    .video-processing-info h4 { margin-bottom: 10px; color: #2c3e50; }

    .video-format-options { display: flex; gap: 15px; margin: 10px 0; }
    .video-format-option { display: flex; align-items: center; gap: 8px; padding: 10px 15px; border: 2px solid #bdc3c7; border-radius: 8px; cursor: pointer; transition: all 0.3s ease; }
    .video-format-option:hover { border-color: #3498db; background: #e3f2fd; }
    .video-format-option.selected { border-color: #27ae60; background: #d4edda; }

    .video-processing-status { background: #e3f2fd; border-radius: 8px; padding: 10px; margin: 10px 0; border-left: 4px solid #3498db; font-size: 0.9em; }
    .video-processing-status.success { background: #d4edda; border-left-color: #27ae60; }
    .video-processing-status.error { background: #f8d7da; border-left-color: #e74c3c; }

    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    @keyframes slideIn { from { opacity: 0; transform: translateX(-10px); } to { opacity: 1; transform: translateX(0); } }

    @media (max-width: 768px) {
      .ai-actions { flex-direction: column; }
      .ai-btn { flex: none; }
      .file-item { flex-direction: column; align-items: flex-start; gap: 10px; }
      .file-rename { margin-left: 0; width: 100%; }
      .rename-input { width: 100%; }
      .background-color-options { grid-template-columns: 1fr; }
      .video-format-options { flex-wrap: wrap; }
    }
  </style>
</head>

<body>
<div class="container">
  <div class="header">
    <h1>üöÄ MediaProcessor</h1>
    <p>–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤ | Relation-AI Module</p>
    <div id="ffmpegStatus" class="ffmpeg-status">FFmpeg: –ø—Ä–æ–≤–µ—Ä–∫–∞‚Ä¶</div>
  </div>

  <div class="upload-zone" id="dropZone">
    <div class="upload-icon">üìÅ</div>
    <h3>–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Ñ–∞–π–ª—ã —Å—é–¥–∞</h3>
    <p>–∏–ª–∏</p>
    <button class="upload-btn" data-action="open-file-picker">
      –í—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª—ã
    </button>
    <input type="file" id="fileInput" class="file-input" multiple
      accept="image/*,.mp3,.mp4,.mov,.avi,.ogg,.wav,.flac,.aac,.mkv,.webm,.wmv,.flv">
  </div>

  <div class="file-list" id="fileList">
    <div class="empty-state" id="emptyState">
      <div class="upload-icon">üìÑ</div>
      <h3>–ù–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤</h3>
      <p>–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª—ã, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É</p>
    </div>
  </div>

  <div class="settings">
    <div class="settings-header">
      <h2>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏</h2>
      <div class="settings-controls">
        <button class="settings-btn reset" data-action="reset-all">üîÑ –°–±—Ä–æ—Å–∏—Ç—å –≤—Å—ë</button>
        <button class="settings-btn clear" data-action="clear-all-checkboxes">‚ùå –£–±—Ä–∞—Ç—å –≥–∞–ª–æ—á–∫–∏</button>
      </div>
    </div>

    <div class="naming-section">
      <h3>üè∑Ô∏è –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤</h3>
      <p style="color:#666;margin-bottom:10px;">
        –í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤–æ–µ –∏–º—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞ –≤ —Å–ø–∏—Å–∫–µ –≤—ã—à–µ –∏–ª–∏ —É–∫–∞–∂–∏—Ç–µ –æ–±—â–µ–µ –∏–º—è –¥–ª—è —É–º–Ω–æ–≥–æ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏—è
      </p>

      <div class="naming-options">
        <div class="naming-option">
          <input type="checkbox" id="useOriginalNames">
          <label for="useOriginalNames">–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ –∏–º–µ–Ω–∞ —Ñ–∞–π–ª–æ–≤</label>
        </div>

        <div class="naming-option">
          <input type="checkbox" id="smartRenaming">
          <label for="smartRenaming">–£–º–Ω–æ–µ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ (–µ–¥–∏–Ω–∞—è –±–∞–∑–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä: logo, banner, audio_hook)</label>
        </div>

        <div class="naming-option" style="flex-direction:column;align-items:flex-start;">
          <label for="globalBaseName">–û–±—â–µ–µ –∏–º—è –¥–ª—è –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ (–ø—Ä–∏ —É–º–Ω–æ–º –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–∏):</label>
          <input type="text" id="globalBaseName" class="rename-input" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: logo, banner, audio_hook">
        </div>
      </div>

      <div class="naming-example">
        –ü—Ä–∏–º–µ—Ä –∏–º–µ–Ω –ø–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏:
        <strong id="namingExample">banner.png, banner_2.png, banner_3.png</strong>
      </div>
    </div>

    <!-- AI-—Å–æ–≤–µ—Ç–Ω–∏–∫ -->
    <div class="ai-advisor-section">
      <h3>üß† AI-–°–æ–≤–µ—Ç–Ω–∏–∫</h3>
      <div class="ai-advisor-card">
        <div class="ai-tip" id="aiTip">
          <div class="ai-tip-header">
            <span class="ai-icon">üí°</span>
            <strong>–°–æ–≤–µ—Ç–Ω–∏–∫ –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ</strong>
          </div>
          <div class="ai-tip-content">–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª—ã –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏</div>
        </div>

        <div class="ai-actions">
          <button class="ai-btn" data-action="ai-advice" id="aiAdviceBtn">ü§ñ –ü–æ–ª—É—á–∏—Ç—å —Å–æ–≤–µ—Ç—ã</button>
          <button class="ai-btn secondary" data-action="analyze-images" id="analyzeImagesBtn">üé® –ê–Ω–∞–ª–∏–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π</button>
        </div>

        <div class="ai-results hidden" id="aiResults">
          <div class="ai-stats" id="aiStats"></div>
          <div class="ai-tips-list" id="aiTipsList"></div>
        </div>
      </div>
    </div>

    <!-- AI-–∞–Ω–∞–ª–∏–∑ –±—Ä–µ–Ω–¥–∞ -->
    <div class="ai-section">
      <h3>üß† AI-–ê–Ω–∞–ª–∏–∑ –±—Ä–µ–Ω–¥–∞</h3>

      <div class="checkbox-controls">
        <button class="checkbox-btn select-all" data-action="select-all" data-scope="ai">‚úÖ –í—ã–±—Ä–∞—Ç—å –≤—Å–µ AI</button>
        <button class="checkbox-btn clear-all" data-action="clear-scope" data-scope="ai">‚ùå –£–±—Ä–∞—Ç—å –≤—Å–µ AI</button>
      </div>

      <div class="ai-feature">
        <input type="checkbox" id="aiAnalysis">
        <label for="aiAnalysis">–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ü–≤–µ—Ç–∞ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</label>
      </div>

      <button class="upload-btn" data-action="analyze-brand" style="background:#9b59b6;">
        üîç –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –±—Ä–µ–Ω–¥
      </button>

      <div class="brand-analysis-results hidden" id="brandAnalysisResults"></div>
    </div>

    <!-- –¶–≤–µ—Ç –ø–æ–¥–ª–æ–∂–∫–∏ -->
    <div class="background-color-section">
      <h3>üé® –¶–≤–µ—Ç –ø–æ–¥–ª–æ–∂–∫–∏ –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π</h3>
      <p style="color:#666;margin-bottom:15px;">–í—ã–±–µ—Ä–∏—Ç–µ —Ü–≤–µ—Ç —Ñ–æ–Ω–∞ –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (–∞–∫—Ç—É–∞–ª—å–Ω–æ –¥–ª—è JPG –∏ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–æ–≤)</p>

      <div class="background-color-options">
        <div class="background-color-option selected" data-background="white">
          <div class="background-color-preview" style="background:white;border:2px solid #ddd;"><span style="color:#666;">‚¨ú</span></div>
          <div class="background-color-info">
            <div class="background-color-name">–ë–µ–ª—ã–π</div>
            <div class="background-color-description">–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –±–µ–ª—ã–π —Ñ–æ–Ω</div>
          </div>
        </div>

        <div class="background-color-option" data-background="lightgray">
          <div class="background-color-preview" style="background:#f0f0f0;"><span style="color:#666;">‚¨ú</span></div>
          <div class="background-color-info">
            <div class="background-color-name">–°–≤–µ—Ç–ª–æ-—Å–µ—Ä—ã–π</div>
            <div class="background-color-description">–ù–µ–π—Ç—Ä–∞–ª—å–Ω—ã–π —Å–µ—Ä—ã–π —Ñ–æ–Ω</div>
          </div>
        </div>

        <div class="background-color-option" data-background="transparent">
          <div class="background-color-preview transparent-grid" style="background:rgba(0,0,0,0);"><span>‚óªÔ∏è</span></div>
          <div class="background-color-info">
            <div class="background-color-name">–ü—Ä–æ–∑—Ä–∞—á–Ω—ã–π</div>
            <div class="background-color-description">–î–ª—è PNG —Å –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å—é</div>
          </div>
        </div>

        <div class="background-color-option" data-background="black">
          <div class="background-color-preview" style="background:#000;"><span style="color:white;">‚¨õ</span></div>
          <div class="background-color-info">
            <div class="background-color-name">–ß–µ—Ä–Ω—ã–π</div>
            <div class="background-color-description">–¢–µ–º–Ω—ã–π —Ñ–æ–Ω –¥–ª—è –∫–æ–Ω—Ç—Ä–∞—Å—Ç–∞</div>
          </div>
        </div>

        <div class="background-color-option" data-background="custom" id="customBgOption">
          <div class="background-color-preview" id="customBgPreview" style="background:#ffffff;">
            <span style="color:#666;">üé®</span>
          </div>
          <div class="background-color-info">
            <div class="background-color-name">–°–≤–æ–π —Ü–≤–µ—Ç</div>
            <div class="background-color-description">–ò–∑ hex / picker</div>
          </div>
        </div>
      </div>

      <div class="custom-color-picker">
        <label style="font-weight:600;color:#2c3e50;">–°–≤–æ–π —Ü–≤–µ—Ç:</label>
        <input type="color" class="color-input" id="customColorPicker" value="#ffffff">
        <input type="text" class="color-hex-input" id="customColorHex" value="#ffffff" placeholder="#RRGGBB">
        <button class="upload-btn" data-action="apply-custom-color" style="padding:8px 15px;font-size:0.9em;background:#9b59b6;">
          –ü—Ä–∏–º–µ–Ω–∏—Ç—å
        </button>
      </div>

      <p style="margin-top:10px;font-size:0.9em;color:#7f8c8d;">
        <strong>–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:</strong> –î–ª—è PNG-—Ñ–∞–π–ª–æ–≤ —Å –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å—é —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –≤—ã–±–∏—Ä–∞—Ç—å "–ü—Ä–æ–∑—Ä–∞—á–Ω—ã–π" —Ñ–æ–Ω.
      </p>
    </div>

    <div class="settings-section">
      <h3>üì∑ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π</h3>
      <input type="text" class="size-input" id="imageSizes" value="1200x600, 800x400, 400x200" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ä–∞–∑–º–µ—Ä—ã —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é">

      <div class="preset-buttons">
        <button class="preset-btn" data-action="load-preset" data-preset="creatives">–ö—Ä–µ–∞—Ç–∏–≤—ã</button>
        <button class="preset-btn" data-action="load-preset" data-preset="vertical">–í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–µ</button>
        <button class="preset-btn" data-action="load-preset" data-preset="logos">–õ–æ–≥–æ—Ç–∏–ø—ã</button>
        <button class="preset-btn" data-action="load-preset" data-preset="icons">–ò–∫–æ–Ω–∫–∏</button>
      </div>

      <div class="checkbox-controls">
        <button class="checkbox-btn select-all" data-action="select-all" data-scope="image">‚úÖ –í—ã–±—Ä–∞—Ç—å –≤—Å–µ —Ñ–æ—Ä–º–∞—Ç—ã</button>
        <button class="checkbox-btn clear-all" data-action="clear-scope" data-scope="image">‚ùå –£–±—Ä–∞—Ç—å –≤—Å–µ —Ñ–æ—Ä–º–∞—Ç—ã</button>
      </div>

      <div class="format-options">
        <label class="format-option"><input type="checkbox" id="formatPNG"> PNG</label>
        <label class="format-option"><input type="checkbox" id="formatJPG"> JPG</label>
      </div>
    </div>

    <div class="settings-section">
      <h3>üéµ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∞—É–¥–∏–æ</h3>

      <div class="checkbox-controls">
        <button class="checkbox-btn select-all" data-action="select-all" data-scope="audio">‚úÖ –í—ã–±—Ä–∞—Ç—å –≤—Å–µ —Ñ–æ—Ä–º–∞—Ç—ã</button>
        <button class="checkbox-btn clear-all" data-action="clear-scope" data-scope="audio">‚ùå –£–±—Ä–∞—Ç—å –≤—Å–µ —Ñ–æ—Ä–º–∞—Ç—ã</button>
      </div>

      <div class="format-options">
        <label class="format-option"><input type="checkbox" id="audioMP3"> MP3</label>
        <label class="format-option"><input type="checkbox" id="audioOGG"> OGG</label>
      </div>

      <select class="size-input" id="audioBitrate" style="margin-top:10px;">
        <option value="128">128 kbps (—Å—Ç–∞–Ω–¥–∞—Ä—Ç)</option>
        <option value="192">192 kbps (–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ)</option>
        <option value="256">256 kbps (–ø—Ä–µ–º–∏—É–º)</option>
        <option value="320">320 kbps (–º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ)</option>
      </select>
    </div>

    <div class="settings-section">
      <h3>üé¨ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–∏–¥–µ–æ</h3>

      <div class="video-processing-info">
        <h4>‚ÑπÔ∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –æ–±—Ä–∞–±–æ—Ç–∫–µ –≤–∏–¥–µ–æ</h4>
        <p>–í–∏–¥–µ–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —Å –ø–æ–º–æ—â—å—é FFmpeg –≤ –±—Ä–∞—É–∑–µ—Ä–µ. –î–ª—è –ª—É—á—à–µ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –æ–≥—Ä–∞–Ω–∏—á—å—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º—ã—Ö –≤–∏–¥–µ–æ.</p>
        <p><strong>–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:</strong> –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ –Ω–µ –±–æ–ª–µ–µ 1-2 –≤–∏–¥–µ–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.</p>
      </div>

      <h4 style="margin:10px 0 5px 0;">üìê –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ:</h4>
      <div class="resolution-options">
        <div class="resolution-option selected" data-resolution="640x360"><span>640√ó360px</span></div>
        <div class="resolution-option" data-resolution="854x480"><span>854√ó480px</span></div>
        <div class="resolution-option" data-resolution="1280x720"><span>1280√ó720px (HD)</span></div>
        <div class="resolution-option" data-resolution="1920x1080"><span>1920√ó1080px (Full HD)</span></div>
      </div>

      <h4 style="margin:10px 0 5px 0;">üì¶ –§–æ—Ä–º–∞—Ç –≤—ã–≤–æ–¥–∞:</h4>
      <div class="video-format-options">
        <div class="video-format-option selected" data-format="mp4"><span>MP4</span><span style="font-size:0.8em;color:#666;">(–ª—É—á—à–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å)</span></div>
      </div>

      <h4 style="margin:15px 0 5px 0;">üéØ –ö–∞—á–µ—Å—Ç–≤–æ —Å–∂–∞—Ç–∏—è:</h4>
      <div class="video-quality-options">
        <div class="video-quality-option" data-quality="high"><span>–í—ã—Å–æ–∫–æ–µ (CRF 18)</span><span class="quality-info">~60% –æ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª–∞</span></div>
        <div class="video-quality-option selected" data-quality="medium"><span>–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ (CRF 23)</span><span class="quality-info">~40% –æ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª–∞</span></div>
        <div class="video-quality-option" data-quality="low"><span>–≠–∫–æ–Ω–æ–º–Ω–æ–µ (CRF 28)</span><span class="quality-info">~25% –æ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª–∞</span></div>
      </div>
    </div>
  </div>

  <div class="stats" id="statsInfo"></div>

  <button class="process-btn" id="processBtn">üöÄ –ù–∞—á–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É</button>

  <div class="progress-bar hidden" id="progressBar">
    <div class="progress" id="progress"></div>
  </div>

  <div class="result hidden" id="result">
    <h3>‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!</h3>
    <div class="result-files" id="resultFiles"></div>
  </div>

  <div class="download-section hidden" id="downloadSection">
    <button class="download-all-btn" id="downloadAllBtn">üíæ –°–∫–∞—á–∞—Ç—å –≤—Å–µ —Ñ–∞–π–ª—ã (ZIP)</button>
    <p style="text-align:center;margin-top:10px;color:#666;">–ë—É–¥–µ—Ç —Å–∫–∞—á–∞–Ω ZIP-–∞—Ä—Ö–∏–≤ —Å–æ –≤—Å–µ–º–∏ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏</p>
  </div>
</div>


  <script type="module" src="./src/main.js"></script>
</body>
</html>
